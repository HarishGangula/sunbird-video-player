!function(u,t){"use strict";var r={settings:{},prefix:"transcript"};r.player=this;var n,i={autoscroll:!0,clickArea:"text",showTitle:!0,showTrackSelector:!0,followPlayerTrack:!0,stopScrollWhenInUse:!0},d={secondsToTime:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),e=(e=Math.floor(e%60))<10?"0"+e:e,n=0<t&&n<10?"0"+n:n;return 0<t?t+":"+n+":"+e:n+":"+e},localize:function(e){return e},createEl:function(e,t){t=t||"";e=document.createElement(e);return e.className=n.prefix+t,e},extend:function(e){var t,n,r=typeof e;if(!("function"==r||"object"==r&&e))return e;for(var i=1,a=arguments.length;i<a;i++)for(n in t=arguments[i])e[n]=t[n];return e}},a={handlers_:[],on:function(e,t,n){if("function"!=typeof n)throw new TypeError("Callback is not a function.");this.handlers_.push([e,t,n])},trigger:function(t,n){this.handlers_.forEach(function(e){e[0]===t&&e[1]===n&&e[2].apply()})}},f={init:function(e,t){return this.element=e,this.userIsScrolling=!1,this.mouseIsOverTranscript=!0,this.isAutoScrolling=!0,function(e){var t=this;e.addEventListener("scroll",function(){t.isAutoScrolling?t.isAutoScrolling=!1:(t.userIsScrolling=!0,e.classList.add("is-inuse"))}),e.addEventListener("mouseenter",function(){t.mouseIsOverTranscript=!0}),e.addEventListener("mouseleave",function(){t.mouseIsOverTranscript=!1,setTimeout(function(){t.mouseIsOverTranscript||(t.userIsScrolling=!1,e.classList.remove("is-inuse"))},1e3)})}.call(this,this.element),this},to:function(e){var t,n,r,i,a,o;this.canScroll()&&(n=(t=e.parentElement).offsetTop+t.clientHeight,r=e.offsetTop+e.clientHeight,i=e.offsetTop-t.offsetTop,a=e.offsetTop+e.clientHeight-t.offsetTop,i<t.scrollTop?o=e.offsetTop-t.offsetTop:a>t.scrollTop+t.clientHeight&&(o=r-n),void 0!==o&&t.scrollTop!==o&&s.call(this,t,o,400))},canScroll:function(){var e=this.element;return e.scrollHeight>e.offsetHeight},inUse:function(){return this.userIsScrolling}};function s(n,r,i){var a=Date.now(),o=n.scrollTop,s=this;r=Math.max(0,r);var c=(r=Math.min(n.scrollHeight-n.clientHeight,r))-o,l=function(){var e,t=Date.now()-a;s.isAutoScrolling=!0,n.scrollTop=(e=t,t=i,o+c*Math.sin(Math.min(1,e/t)*(Math.PI/2))),n.scrollTop!==r&&requestAnimationFrame(l,n)};requestAnimationFrame(l,n)}var o,p,h,g,c,l={get:function(){var e,t,n=[];for(r.tracks=r.player.textTracks(),e=0;e<r.tracks.length;e++)"captions"!==(t=r.tracks[e]).kind&&"subtitles"!==t.kind||n.push(t);return n},active:function(e){for(var t,n=0;n<r.tracks.length;n++)if("showing"===(t=r.tracks[n]).mode)return o=t;return o||e[0]}},m=(p=n=r,h={element:{},body:{}},g=function(e){"object"!=typeof e&&(e=p.player.textTracks()[e]);var t,n,r,i,a,o=d.createEl("div","-body"),s=document.createDocumentFragment();if(e.activeCues){for(var c=e.cues,l=0;l<c.length;l++)n=c[l],a=i=r=void 0,r=d.createEl("div","-line"),i=d.createEl("span","-timestamp"),a=d.createEl("span","-text"),r.setAttribute("data-begin",n.startTime),i.textContent=d.secondsToTime(n.startTime),a.innerHTML=n.text,r.appendChild(i),r.appendChild(a),s.appendChild(r);o.innerHTML="",o.appendChild(s),o.setAttribute("lang",e.language),o.scroll=(t=o,Object.create(f).init(t)),o.addEventListener("click",T),h.element.replaceChild(o,h.body),h.body=o}else"showing"!==e.mode&&(e.mode="hidden"),u.setTimeout(function(){g(e)},100)},{create:function(){var e,r,t=document.createElement("div");return(h.element=t).setAttribute("id",p.prefix+"-"+p.player.id()),p.settings.showTitle&&((e=d.createEl("header","-header")).textContent=d.localize("Transcript"),e=e,t.appendChild(e)),p.settings.showTrackSelector&&(r=d.createEl("select","-selector"),p.validTracks.forEach(function(e,t){var n=document.createElement("option");n.value=t,n.textContent=e.label+" ("+e.language+")",r.appendChild(n)}),r.addEventListener("change",function(e){c(document.querySelector("#"+p.prefix+"-"+p.player.id()+" option:checked").value),v("trackchanged")}),e=r,t.appendChild(e)),h.body=d.createEl("div","-body"),t.appendChild(h.body),c(p.currentTrack),this},setTrack:c=function(e,t){g(e,t)},setCue:function(e){for(var t,n,r,i=h.body.children,a=0;a<i.length;a++)n=(t=i[a]).getAttribute("data-begin"),r=a<i.length-1?i[a+1].getAttribute("data-begin"):p.player.duration()||1/0,n<e&&e<r?t.classList.contains("is-active")||(t.classList.add("is-active"),!p.settings.autoscroll||p.settings.stopScrollWhenInUse&&h.body.scroll.inUse()||h.body.scroll.to(t)):t.classList.remove("is-active")},el:function(){return h.element},on:function(e,t){a.on(this,e,t)},trigger:v});function v(e){a.trigger(this,e)}function T(e){var t=e.target.classList;null!=(e=e.target.getAttribute("data-begin")||e.target.parentElement.getAttribute("data-begin"))&&("line"===p.settings.clickArea||"timestamp"===p.settings.clickArea&&t.contains(p.prefix+"-timestamp")||"text"===p.settings.clickArea&&t.contains(p.prefix+"-text"))&&p.player.currentTime(e)}t.registerPlugin("transcript",function(e){r.player=this,r.validTracks=l.get(),r.currentTrack=l.active(r.validTracks),r.settings=t.mergeOptions(i,e),r.widget=m.create();e=function(){r.currentTrack=l.active(r.validTracks),r.widget.setTrack(r.currentTrack)};if(!(0<r.validTracks.length))throw new Error("videojs-transcript: No tracks found!");return e(),r.player.on("timeupdate",function(){r.widget.setCue(r.player.currentTime())}),r.settings.followPlayerTrack&&(r.player.on("captionstrackchange",e),r.player.on("subtitlestrackchange",e)),{el:function(){return r.widget.el()},setTrack:r.widget.setTrack}})}(window,videojs);