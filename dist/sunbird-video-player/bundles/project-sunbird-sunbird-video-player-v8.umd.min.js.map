{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://@project-sunbird/sunbird-video-player-v8/lib/services/util.service.ts","ng://@project-sunbird/sunbird-video-player-v8/lib/sunbird-video-player.service.ts","ng://@project-sunbird/sunbird-video-player-v8/lib/services/viewer.service.ts","ng://@project-sunbird/sunbird-video-player-v8/lib/sunbird-video-player.component.ts","ng://@project-sunbird/sunbird-video-player-v8/lib/components/video-player/video-player.component.ts","ng://@project-sunbird/sunbird-video-player-v8/lib/sunbird-video-player.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","UtilService","uniqueId","characters","charactersLength","charAt","Math","floor","random","getTimeSpentText","duration","minutes","seconds","Number","toFixed","Injectable","args","providedIn","SunbirdVideoPlayerService","utilService","contentSessionId","initialize","_a","context","config","metadata","playSessionId","CsTelemetryModule","instance","isInitialised","init","telemetryService","initTelemetry","pdata","env","channel","did","authtoken","authToken","uid","sid","batchsize","mode","host","endpoint","tags","cdata","id","type","userOrgDetails","telemetryObject","identifier","ver","pkgVersion","rollup","objectRollup","start","raiseStartTelemetry","options","getEventOptions","edata","pageid","end","totallength","currentlength","endpageseen","totalseekedlength","visitedlength","durationSec","raiseEndTelemetry","summary","progress","visitedcontentend","interact","currentPage","raiseInteractTelemetry","subtype","heartBeat","data","playerTelemetryService","onHeartBeatEvent","impression","raiseImpressionTelemetry","uri","error","errorCode","errorType","stacktrace","raiseErrorTelemetry","err","errtype","toString","object","contextRollup","ViewerService","videoPlayerService","http","endPageSeen","timeSpent","version","playerEvent","EventEmitter","sidebarMenuEvent","isAvailableLocally","PlayerLoadStartedAt","Date","getTime","contentName","name","streamingUrl","artifactUrl","mimeType","artifactMimeType","traceId","markers","userData","_b","firstName","lastName","userName","metaData","actions","volume","playBackSpeeds","totalDuration","showDownloadPopup","getPlayerOptions","src","head","responseType","toPromise","catch","_this","raiseExceptionLog","streamingUrlSupport","errorMessage","Error","getMarkers","pageSessionUpdate","raiseStartEvent","event","startEvent","eid","emit","raiseEndEvent","endEvent","currentTime","totalTime","totalLength","visitedLength","totalSeekedLength","raiseHeartBeatEvent","hearBeatEvent","includes","toLowerCase","exceptionLogEvent","requestid","HttpClient","SunbirdVideoPlayerComponent","viewerService","cdr","renderer2","errorService","telemetryEvent","viewState","showControls","sideMenuConfig","showShare","showDownload","showReplay","showExit","isPaused","subscribe","code","contentLoadFails","message","navigator","onLine","internetConnectivity","showContentError","forEach","onTelemetryEvent","detail","ngOnInit","setInterval","nextContent","playerConfig","sideMenu","ngAfterViewInit","videoPlayerElement","videoPlayerRef","nativeElement","unlistenMouseMove","listen","unlistenTouchStart","contentCompabilityLevel","checkContentCompatible","checkContentCompatibility","contentCompatibility","sideBarEvents","downloadVideo","playContent","replayContent","exitContent","a","document","createElement","href","download","target","appendChild","click","remove","ngOnDestroy","Component","selector","template","ChangeDetectorRef","Renderer2","ErrorService","Input","Output","ViewChild","static","HostListener","VideoPlayerComponent","showBackwardButton","showForwardButton","showPlayButton","showPauseButton","currentPlayerState","previousTime","seekStart","time","totalSpentTime","isAutoplayPrevented","player","videojs","fluid","sources","autoplay","playbackRates","controlBar","children","registerEvents","unlistenTargetMouseMove","unlistenTargetTouchStart","pause","play","eventsSubscription","events","action","promise","undefined","on","isFullscreen","parentNode","controlDiv","handleVideoControls","toggleForwardRewindButton","backward","forward","startTime","updatePlayerEventsMetadata","playbackRate","dispose","encapsulation","ViewEncapsulation","None","SunbirdVideoPlayerModule","NgModule","declarations","imports","CommonModule","FormsModule","HttpClientModule","SunbirdPlayerSdkModule","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilService {\n\n  public uniqueId(length = 32) {\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    for (let i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  }\n\n  public getTimeSpentText(duration) {\n    const minutes = Math.floor(duration / 60000);\n    const seconds = Number(((duration % 60000) / 1000).toFixed(0));\n    return (minutes + ':' + (seconds < 10 ? '0' : '') + seconds);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { PlayerConfig } from './playerInterfaces';\nimport { UtilService } from './services/util.service';\nimport { CsTelemetryModule } from '@project-sunbird/client-services/telemetry';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SunbirdVideoPlayerService {\n\n  private contentSessionId: string;\n  private playSessionId: string;\n  private telemetryObject: any;\n  private context;\n  public config;\n\n  constructor(private utilService: UtilService) {\n    this.contentSessionId = this.utilService.uniqueId();\n  }\n\n  public initialize({ context, config, metadata }: PlayerConfig) {\n    this.context = context;\n    this.config = config;\n    this.playSessionId = this.utilService.uniqueId();\n\n    if (!CsTelemetryModule.instance.isInitialised) {\n      CsTelemetryModule.instance.init({});\n      CsTelemetryModule.instance.telemetryService.initTelemetry(\n        {\n          config: {\n            pdata: context.pdata,\n            env: 'ContentPlayer',\n            channel: context.channel,\n            did: context.did,\n            authtoken: context.authToken || '',\n            uid: context.uid || '',\n            sid: context.sid,\n            batchsize: 20,\n            mode: context.mode,\n            host: context.host || '',\n            endpoint: context.endpoint || '/data/v3/telemetry',\n            tags: context.tags,\n            cdata: [{ id: this.contentSessionId, type: 'ContentSession' },\n            { id: this.playSessionId, type: 'PlaySession' }]\n          },\n          userOrgDetails: {}\n        }\n      );\n    }\n\n    this.telemetryObject = {\n      id: metadata.identifier,\n      type: 'Content',\n      ver: metadata.pkgVersion + '',\n      rollup: context.objectRollup || {}\n    };\n  }\n\n\n  public start(duration) {\n    CsTelemetryModule.instance.telemetryService.raiseStartTelemetry(\n      {\n        options: this.getEventOptions(),\n        edata: { type: 'content', mode: 'play', pageid: '', duration: Number((duration / 1e3).toFixed(2)) }\n      }\n    );\n\n  }\n\n  public end(duration, totallength, currentlength, endpageseen, totalseekedlength, visitedlength) {\n    const durationSec = Number((duration / 1e3).toFixed(2));\n    CsTelemetryModule.instance.telemetryService.raiseEndTelemetry({\n      edata: {\n        type: 'content',\n        mode: 'play',\n        pageid: 'sunbird-player-Endpage',\n        summary: [\n          {\n            progress: Number(((currentlength / totallength) * 100).toFixed(0))\n          },\n          {\n            totallength\n          },\n          {\n            visitedlength\n          },\n          {\n            visitedcontentend: (totallength === currentlength)\n          },\n          {\n            totalseekedlength\n          },\n          {\n            endpageseen\n          }\n        ],\n        duration: durationSec\n      },\n      options: this.getEventOptions()\n    });\n\n  }\n\n  public interact(id, currentPage) {\n    CsTelemetryModule.instance.telemetryService.raiseInteractTelemetry({\n      options: this.getEventOptions(),\n      edata: { type: 'TOUCH', subtype: '', id, pageid: currentPage + '' }\n    });\n  }\n\n  public heartBeat(data) {\n    CsTelemetryModule.instance.playerTelemetryService.onHeartBeatEvent(data, {});\n  }\n\n  public impression(currentPage) {\n    CsTelemetryModule.instance.telemetryService.raiseImpressionTelemetry({\n      options: this.getEventOptions(),\n      edata: { type: 'workflow', subtype: '', pageid: currentPage + '', uri: '' }\n    });\n  }\n\n  public error(errorCode: string , errorType:string ,  stacktrace?:Error) {\n    CsTelemetryModule.instance.telemetryService.raiseErrorTelemetry({\n      options: this.getEventOptions(),\n      edata: {\n        err: errorCode,\n        errtype: errorType,\n        stacktrace: (stacktrace && stacktrace.toString()) || ''\n      }\n    });\n  }\n\n  private getEventOptions() {\n    return ({\n      object: this.telemetryObject,\n      context: {\n        channel: this.context.channel,\n        pdata: this.context.pdata,\n        env: 'ContentPlayer',\n        sid: this.context.sid,\n        uid: this.context.uid,\n        cdata: [{ id: this.contentSessionId, type: 'ContentSession' },\n        { id: this.playSessionId, type: 'PlaySession' }],\n        rollup: this.context.contextRollup || {}\n      }\n    });\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { EventEmitter, Injectable } from '@angular/core';\nimport { PlayerConfig } from '../playerInterfaces';\nimport { SunbirdVideoPlayerService } from '../sunbird-video-player.service';\nimport { UtilService } from './util.service';\nimport { errorCode , errorMessage } from '@project-sunbird/sunbird-player-sdk-v8';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ViewerService {\n\n  public endPageSeen = false;\n  public timeSpent = '0:0';\n  private version = '1.0';\n  public playerEvent = new EventEmitter<any>();\n  public contentName: string;\n  public showDownloadPopup: boolean;\n  public streamingUrl: string;\n  public mimeType: string;\n  public artifactMimeType: string;\n  public userName: string;\n  public metaData: any;\n  public PlayerLoadStartedAt: number;\n  public totalLength;\n  public currentlength;\n  public totalSeekedLength;\n  public artifactUrl;\n  public visitedLength;\n  public sidebarMenuEvent = new EventEmitter<any>();\n  public traceId: string;\n  public isAvailableLocally = false;\n  private markers: any;\n\n\n  constructor(private videoPlayerService: SunbirdVideoPlayerService,\n    private utilService: UtilService,\n    private http: HttpClient) {\n    this.PlayerLoadStartedAt = new Date().getTime();\n  }\n\n  initialize({ context, config, metadata }: PlayerConfig) {\n    this.contentName = metadata.name;\n    this.streamingUrl = metadata.streamingUrl;\n    this.artifactUrl = metadata.artifactUrl;\n    this.mimeType = metadata.streamingUrl ? 'application/x-mpegURL' : metadata.mimeType;\n    this.artifactMimeType = metadata.mimeType;\n    this.isAvailableLocally = metadata.isAvailableLocally;\n    this.traceId = config.traceId;\n    this.markers = config.markers;\n    if (context.userData) {\n      const { userData: { firstName, lastName } } = context;\n      this.userName = firstName === lastName ? firstName : `${firstName} ${lastName}`;\n    }\n    this.metaData = {\n      actions: [\n      ],\n      volume: [],\n      playBackSpeeds: [],\n      totalDuration: 0\n    };\n    this.showDownloadPopup = false;\n    this.endPageSeen = false;\n  }\n\n  async getPlayerOptions() {\n    if (!this.streamingUrl) {\n      return [{ src: this.artifactUrl, type: this.artifactMimeType }];\n    } else {\n      const data = await this.http.head(this.streamingUrl, { responseType: 'blob' }).toPromise().catch(error => {\n        this.raiseExceptionLog(errorCode.streamingUrlSupport , errorMessage.streamingUrlSupport , new Error(`Streaming Url Not Supported  ${this.streamingUrl}`), this.traceId);\n      });\n      if (data) {\n        return [{ src: this.streamingUrl, type: this.mimeType }];\n      } else {\n        return [{ src: this.artifactUrl, type: this.artifactMimeType }];\n      }\n    }\n  }\n  getMarkers() {\n    return this.markers;\n  }\n\n\n  public pageSessionUpdate() {\n\n  }\n\n  raiseStartEvent(event) {\n    const duration = new Date().getTime() - this.PlayerLoadStartedAt;\n    const startEvent = {\n      eid: 'START',\n      ver: this.version,\n      edata: {\n        type: 'START',\n        mode: 'play',\n        duration\n      },\n      metaData: this.metaData\n    };\n    this.playerEvent.emit(startEvent);\n    this.videoPlayerService.start(duration);\n    this.PlayerLoadStartedAt = new Date().getTime();\n  }\n\n  raiseEndEvent() {\n    const duration = new Date().getTime() - this.PlayerLoadStartedAt;\n    const endEvent = {\n      eid: 'END',\n      ver: this.version,\n      edata: {\n        type: 'END',\n        currentTime: this.currentlength,\n        totalTime: this.totalLength,\n        duration\n      },\n      metaData: this.metaData\n    };\n    this.playerEvent.emit(endEvent);\n    this.timeSpent = this.utilService.getTimeSpentText(this.visitedLength);\n    this.videoPlayerService.end(duration, this.totalLength, this.currentlength, this.endPageSeen, this.totalSeekedLength,\n      this.visitedLength / 1000);\n  }\n\n\n  raiseHeartBeatEvent(type: string) {\n    const hearBeatEvent = {\n      eid: 'HEARTBEAT',\n      ver: this.version,\n      edata: {\n        type,\n        currentPage: 'videostage'\n      },\n      metaData: this.metaData\n    };\n    this.playerEvent.emit(hearBeatEvent);\n    this.videoPlayerService.heartBeat(hearBeatEvent);\n    const interactItems = ['PLAY', 'PAUSE', 'EXIT', 'VOLUME_CHANGE', 'DRAG',\n      'RATE_CHANGE', 'CLOSE_DOWNLOAD', 'DOWNLOAD', 'NAVIGATE_TO_PAGE',\n      'NEXT', 'OPEN_MENU', 'PREVIOUS', 'CLOSE_MENU', 'DOWNLOAD_MENU',\n      'SHARE', 'REPLAY', 'FORWARD', 'BACKWARD', 'FULLSCREEN' , 'NEXT_CONTENT_PLAY'\n    ];\n    if (interactItems.includes(type)) {\n      this.videoPlayerService.interact(type.toLowerCase(), 'videostage');\n    }\n\n  }\n\n  raiseExceptionLog(errorCode: string, errorType: string, stacktrace, traceId) {\n    const exceptionLogEvent = {\n      eid: 'ERROR',\n      edata: {\n        err: errorCode,\n        errtype: errorType,\n        requestid: traceId || '',\n        stacktrace: (stacktrace && stacktrace.toString()) || '',\n      }\n    };\n    this.playerEvent.emit(exceptionLogEvent);\n    this.videoPlayerService.error(errorCode , errorType , stacktrace);\n  }\n\n}\n","import {\n  ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output,\n  HostListener, ElementRef, ViewChild, AfterViewInit, Renderer2, OnDestroy\n} from '@angular/core';\nimport { ErrorService , errorCode , errorMessage } from '@project-sunbird/sunbird-player-sdk-v8';\nimport { Observable, Subscription } from 'rxjs';\n\nimport { PlayerConfig } from './playerInterfaces';\nimport { ViewerService } from './services/viewer.service';\nimport { SunbirdVideoPlayerService } from './sunbird-video-player.service';\n@Component({\n  selector: 'sunbird-video-player',\n  templateUrl: './sunbird-video-player.component.html',\n  styleUrls: ['./sunbird-video-player.component.scss']\n})\nexport class SunbirdVideoPlayerComponent implements OnInit, AfterViewInit, OnDestroy {\n\n  @Input() playerConfig: PlayerConfig;\n  @Input() events: Observable<{action: string, data: any}>\n  @Output() playerEvent: EventEmitter<object>;\n  @Output() telemetryEvent: EventEmitter<any> = new EventEmitter<any>();\n  @ViewChild('videoPlayer', { static: true }) videoPlayerRef: ElementRef;\n  viewState = 'player';\n  public traceId: string;\n  public nextContent: any;\n  showContentError: boolean;\n  showControls = true;\n  sideMenuConfig = {\n    showShare: true,\n    showDownload: true,\n    showReplay: true,\n    showExit: true\n  };\n  private unlistenTouchStart: () => void;\n  private unlistenMouseMove: () => void;\n  isPaused = false;\n  \n\n  constructor(\n    public videoPlayerService: SunbirdVideoPlayerService,\n    public viewerService: ViewerService,\n    public cdr: ChangeDetectorRef,\n    private renderer2: Renderer2,\n    public errorService: ErrorService\n  ) {\n    this.playerEvent = this.viewerService.playerEvent;\n    this.viewerService.playerEvent.subscribe(event => {\n      if(event.type === 'pause') {\n        this.isPaused = true;\n        this.showControls = true;\n      }\n      if(event.type === 'play') {\n        this.isPaused = false;\n      }\n      if (event.type === 'loadstart') {\n        this.viewerService.raiseStartEvent(event);\n      }\n      if (event.type === 'ended') {\n        this.viewerService.endPageSeen = true;\n        this.viewerService.raiseEndEvent();\n        this.viewState = 'end';\n      }\n      if (event.type === 'error') {\n        let code = errorCode.contentLoadFails,\n          message = errorMessage.contentLoadFails\n\n        if (!navigator.onLine) {\n            code = errorCode.internetConnectivity,\n            message = errorMessage.internetConnectivity\n        }\n        if (this.viewerService.isAvailableLocally) {\n            code = errorCode.contentLoadFails,\n            message = errorMessage.contentLoadFails\n        }\n        if (code === errorCode.contentLoadFails) {\n          this.showContentError = true;\n        }\n        this.viewerService.raiseExceptionLog(code, message, event, this.traceId);\n\n      }\n      const events = [{ type: 'volumechange', telemetryEvent: 'VOLUME_CHANGE' }, { type: 'seeking', telemetryEvent: 'DRAG' }, { type: 'fullscreen', telemetryEvent: 'FULLSCREEN' },\n      { type: 'ratechange', telemetryEvent: 'RATE_CHANGE' }];\n      events.forEach(data => {\n        if (event.type === data.type) {\n          this.viewerService.raiseHeartBeatEvent(data.telemetryEvent);\n        }\n      });\n    });\n  }\n\n  @HostListener('document:TelemetryEvent', ['$event'])\n  onTelemetryEvent(event) {\n    this.telemetryEvent.emit(event.detail);\n  }\n\n  ngOnInit() {\n    setInterval(() => {\n      if (!this.isPaused) {\n        this.showControls = false;\n      }\n    }, 5000);\n\n    /* tslint:disable:no-string-literal */\n    this.nextContent = this.playerConfig.config.nextContent;\n    this.traceId = this.playerConfig.config['traceId'];\n    this.sideMenuConfig = { ...this.sideMenuConfig, ...this.playerConfig.config.sideMenu };\n    this.viewerService.initialize(this.playerConfig);\n    this.videoPlayerService.initialize(this.playerConfig);\n\n\n  }\n\n  sidebarMenuEvent(event) {\n    this.viewerService.sidebarMenuEvent.emit(event);\n  }\n\n  ngAfterViewInit() {\n    const videoPlayerElement = this.videoPlayerRef.nativeElement;\n    this.unlistenMouseMove = this.renderer2.listen(videoPlayerElement, 'mousemove', () => {\n      this.showControls = true;\n    });\n\n    this.unlistenTouchStart = this.renderer2.listen(videoPlayerElement, 'touchstart', () => {\n      this.showControls = true;\n    });\n\n    const contentCompabilityLevel = this.playerConfig.metadata['compatibilityLevel'];\n    if (contentCompabilityLevel) {\n      const checkContentCompatible = this.errorService.checkContentCompatibility(contentCompabilityLevel);\n      if (!checkContentCompatible['isCompitable']) {\n        this.viewerService.raiseExceptionLog(errorCode.contentCompatibility, errorMessage.contentCompatibility, checkContentCompatible['error']['message'], this.traceId);\n      }\n    }\n  }\n\n  sideBarEvents(event) {\n    this.playerEvent.emit(event);\n    if (event === 'DOWNLOAD') {\n      this.downloadVideo();\n    }\n    const events = ['SHARE', 'DOWNLOAD_MENU', 'EXIT', 'CLOSE_MENU'];\n    events.forEach(data => {\n      if (event === data) {\n        this.viewerService.raiseHeartBeatEvent(data);\n      }\n      if (event === 'EXIT') {\n        this.viewerService.sidebarMenuEvent.emit('CLOSE_MENU');\n      }\n    });\n  }\n\n  playContent(event){\n    this.viewerService.raiseHeartBeatEvent(event.type);\n  }\n\n  replayContent(event) {\n    this.playerEvent.emit(event);\n    this.viewState = 'player';\n    this.viewerService.raiseHeartBeatEvent('REPLAY');\n  }\n\n  exitContent(event) {\n    this.playerEvent.emit(event);\n    this.viewerService.raiseHeartBeatEvent('EXIT');\n  }\n\n  downloadVideo() {\n    const a = document.createElement('a');\n    a.href = this.viewerService.artifactUrl;\n    a.download = this.viewerService.contentName;\n    a.target = '_blank';\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n    this.viewerService.raiseHeartBeatEvent('DOWNLOAD');\n  }\n\n  @HostListener('window:beforeunload')\n  ngOnDestroy() {\n    this.viewerService.raiseEndEvent();\n    this.unlistenTouchStart();\n    this.unlistenMouseMove();\n  }\n}\n","import { AfterViewInit, Component, ElementRef, Renderer2, ViewChild, ViewEncapsulation, OnDestroy, Input } from '@angular/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { ViewerService } from '../../services/viewer.service';\n\n@Component({\n  selector: 'video-player',\n  templateUrl: './video-player.component.html',\n  styleUrls: ['./video-player.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class VideoPlayerComponent implements AfterViewInit, OnDestroy {\n  showBackwardButton = false;\n  showForwardButton = false;\n  showPlayButton = true;\n  showPauseButton = false;\n  showControls = true;\n  currentPlayerState = 'none';\n  private unlistenTargetMouseMove: () => void;\n  private unlistenTargetTouchStart: () => void;\n  @Input() events: Observable<any>\n  @ViewChild('target', { static: true }) target: ElementRef;\n  @ViewChild('controlDiv', { static: true }) controlDiv: ElementRef;\n  player: any;\n  totalSeekedLength = 0;\n  previousTime = 0;\n  currentTime = 0;\n  seekStart = null;\n  time = 10;\n  startTime;\n  totalSpentTime = 0;\n  isAutoplayPrevented = false;\n  private eventsSubscription: Subscription;\n\n  constructor(public viewerService: ViewerService, private renderer2: Renderer2) { }\n\n  ngAfterViewInit() {\n    this.viewerService.getPlayerOptions().then(options => {\n      this.player = videojs(this.target.nativeElement, {\n        fluid: true,\n        sources: options,\n        autoplay: true,\n        playbackRates: [0.5, 1, 1.5, 2],\n        controlBar: {\n          children: ['playToggle', 'volumePanel', 'durationDisplay', \n            'progressControl', 'remainingTimeDisplay',\n            'playbackRateMenuButton', 'fullscreenToggle']\n        }\n      }, function onLoad() {\n\n      });\n      this.player.markers(this.viewerService.getMarkers())\n      this.registerEvents();\n    });\n\n    setInterval(() => {\n      if (!this.isAutoplayPrevented && this.currentPlayerState !== 'pause') {\n        this.showControls = false;\n      }\n    }, 5000);\n\n    this.unlistenTargetMouseMove = this.renderer2.listen(this.target.nativeElement, 'mousemove', () => {\n      this.showControls = true;\n    });\n    this.unlistenTargetTouchStart = this.renderer2.listen(this.target.nativeElement, 'touchstart', () => {\n      this.showControls = true;\n    });\n\n    this.viewerService.sidebarMenuEvent.subscribe(event => {\n      if (event === 'OPEN_MENU') { this.pause(); }\n      if (event === 'CLOSE_MENU') { this.play(); }\n    });\n\n    this.eventsSubscription = this.events.subscribe(({action, data}) => {\n      if(action === 'play') {\n        this.play();\n      } else if(action === 'pause') {\n        this.pause();\n      } else if(action === 'seekTo') {\n        this.player.currentTime(data.seconds)\n      }\n    });\n  }\n\n  registerEvents() {\n    const promise = this.player.play();\n    if (promise !== undefined) {\n      promise.catch(error => {\n        this.isAutoplayPrevented = true;\n      });\n    }\n\n    const events = ['loadstart', 'play', 'pause', 'durationchange',\n      'error', 'playing', 'progress', 'seeked', 'seeking', 'volumechange',\n      'ratechange'];\n\n    this.player.on('fullscreenchange', (data) => {\n      // This code is to show the controldiv in fullscreen mode\n      if(this.player.isFullscreen()) {\n        this.target.nativeElement.parentNode.appendChild(this.controlDiv.nativeElement);\n      }\n      this.viewerService.raiseHeartBeatEvent('FULLSCREEN');\n    })\n\n    this.player.on('pause', (data) => {\n      this.pause();\n    });\n\n    this.player.on('play', (data) => {\n      this.currentPlayerState = 'play';\n      this.showPauseButton = true;\n      this.showPlayButton = false;\n      this.viewerService.raiseHeartBeatEvent('PLAY');\n      this.isAutoplayPrevented = false;\n    });   \n\n    this.player.on('timeupdate', (data) => {\n      this.handleVideoControls(data);\n      this.viewerService.playerEvent.emit(data);\n      if (this.player.currentTime() === this.player.duration()) {\n        this.handleVideoControls({ type: 'ended' });\n        this.viewerService.playerEvent.emit({ type: 'ended' });\n      }\n    });\n    events.forEach(event => {\n      this.player.on(event, (data) => {\n        this.handleVideoControls(data);\n        this.viewerService.playerEvent.emit(data);\n      });\n    });\n\n  }\n\n  toggleForwardRewindButton() {\n    this.showForwardButton = true;\n    this.showBackwardButton = true;\n    if ((this.player.currentTime() + this.time) > this.player.duration()) {\n      this.showForwardButton = false;\n    }\n    if ((this.player.currentTime() - this.time) < 0) {\n      this.showBackwardButton = false;\n    }\n  }\n\n  play() {\n    this.player.play();\n    this.currentPlayerState = 'play';\n    this.showPauseButton = true;\n    this.showPlayButton = false;\n    this.toggleForwardRewindButton();\n  }\n\n  pause() {\n    this.player.pause();\n    this.currentPlayerState = 'pause';\n    this.showPauseButton = false;\n    this.showPlayButton = true;\n    this.toggleForwardRewindButton();\n    this.viewerService.raiseHeartBeatEvent('PAUSE');\n  }\n\n  backward() {\n    this.player.currentTime(this.player.currentTime() - this.time);\n    this.toggleForwardRewindButton();\n    this.viewerService.raiseHeartBeatEvent('BACKWARD');\n  }\n\n  forward() {\n    this.player.currentTime(this.player.currentTime() + this.time);\n    this.toggleForwardRewindButton();\n    this.viewerService.raiseHeartBeatEvent('FORWARD');\n  }\n\n  handleVideoControls({ type }) {\n    if (type === 'playing') {\n      this.showPlayButton = false;\n      this.showPauseButton = true;\n    }\n    if (type === 'ended') {\n      this.totalSpentTime += new Date().getTime() - this.startTime;\n      this.viewerService.visitedLength = this.totalSpentTime;\n      this.viewerService.currentlength = this.player.currentTime();\n      this.viewerService.totalLength = this.player.duration();\n      this.updatePlayerEventsMetadata({ type });\n    }\n    if (type === 'pause') {\n      this.totalSpentTime += new Date().getTime() - this.startTime;\n      this.updatePlayerEventsMetadata({ type });\n    }\n    if (type === 'play') {\n      this.startTime = new Date().getTime();\n      this.updatePlayerEventsMetadata({ type });\n    }\n\n    if (type === 'loadstart') {\n      this.startTime = new Date().getTime();\n    }\n\n    // Calulating total seeked length\n    if (type === 'timeupdate') {\n      this.previousTime = this.currentTime;\n      this.currentTime = this.player.currentTime();\n      this.toggleForwardRewindButton();\n    }\n    if (type === 'seeking') {\n      if (this.seekStart === null) { this.seekStart = this.previousTime; }\n    }\n    if (type === 'seeked') {\n      this.updatePlayerEventsMetadata({ type });\n      if (this.currentTime > this.seekStart) {\n        this.totalSeekedLength = this.totalSeekedLength + (this.currentTime - this.seekStart);\n      } else if (this.seekStart > this.currentTime) {\n        this.totalSeekedLength = this.totalSeekedLength + (this.seekStart - this.currentTime);\n      }\n      this.viewerService.totalSeekedLength = this.totalSeekedLength;\n      this.seekStart = null;\n    }\n  }\n\n  updatePlayerEventsMetadata({ type }) {\n    this.viewerService.metaData.totalDuration = this.player.duration();\n    this.viewerService.metaData.playBackSpeeds.push(this.player.playbackRate());\n    this.viewerService.metaData.volume.push(this.player.volume());\n    const action = {};\n    action[type + ''] = this.player.currentTime();\n    this.viewerService.metaData.actions.push(action);\n  }\n  ngOnDestroy() {\n    if (this.player) {\n      this.player.dispose();\n    }\n    this.unlistenTargetMouseMove();\n    this.unlistenTargetTouchStart();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { SunbirdPlayerSdkModule  } from '@project-sunbird/sunbird-player-sdk-v8';\nimport { SunbirdVideoPlayerComponent } from './sunbird-video-player.component';\nimport { VideoPlayerComponent } from './components/video-player/video-player.component';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n  declarations: [SunbirdVideoPlayerComponent, VideoPlayerComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    SunbirdPlayerSdkModule\n  ],\n  exports: [SunbirdVideoPlayerComponent , SunbirdPlayerSdkModule]\n})\nexport class SunbirdVideoPlayerModule { }\n"]}